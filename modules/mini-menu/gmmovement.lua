--[[
───────────▒▒▒▒▒▒▒▒
─────────▒▒▒──────▒▒▒
────────▒▒───▒▒▒▒──▒░▒
───────▒▒───▒▒──▒▒──▒░▒
──────▒▒░▒──────▒▒──▒░▒
───────▒▒░▒────▒▒──▒░▒
─────────▒▒▒▒▒▒▒───▒▒
─────────────────▒▒▒
─────▒▒▒▒────────▒▒
───▒▒▒░░▒▒▒─────▒▒──▓▓▓▓▓▓▓▓
──▒▒─────▒▒▒────▒▒▓▓▓▓▓░░░░░▓▓──▓▓▓▓
─▒───▒▒────▒▒─▓▓▒░░░░░░░░░█▓▒▓▓▓▓░░▓▓▓
▒▒──▒─▒▒───▓▒▒░░▒░░░░░████▓▓▒▒▓░░░░░░▓▓
░▒▒───▒──▓▓▓░▒░░░░░░█████▓▓▒▒▒▒▓▓▓▓▓░░▓▓
──▒▒▒▒──▓▓░░░░░░███████▓▓▓▒▒▒▒▒▓───▓▓░▓▓
──────▓▓░░░░░░███████▓▓▓▒▒▒▒▒▒▒▓───▓░░▓▓
─────▓▓░░░░░███████▓▓▓▒▒▒▒▒▒▒▒▒▓▓▓▓░░▓▓
────▓▓░░░░██████▓▓▓▓▒▒▒▒▒▒▒▒▒▒▒▓░░░░▓▓
────▓▓▓░████▓▓▓▓▓▒▒▒▒▒▒▒▒▒▒▒▒▒▓▓▓▓▓▓
─────▓▓▓▓▓▓▓▓▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▓▓
─────▓▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▓▓▓
──────▓▓▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▓▓▓
───────▓▓▓▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▓▓▓▓
─────────▓▓▓▒▒▒▒▒▒▒▒▒▒▒▒▓▓▓▓
───────────▓▓▓▓▓▓▒▒▒▒▒▓▓▓▓
───────────────▓▓▓▓▓▓▓▓
-- Made by TestUnit
]]--
function DMA:MoveCharacterXYZ(mode)
	local distance = DMAUserVars["MoveDistance"];
	local angle = GetPlayerFacing();
	if distance == nil then
		distance = 0;
	end

	if mode == 2 then
		angle = angle + -math.pi;
	end
	if mode == 4 then -- Left
		angle = angle + math.pi/2;
	elseif mode == 3 then
		angle = angle + ((3*math.pi)/2);
	end

	if angle > 2*math.pi then
		angle = math.abs(angle - 2*math.pi)
	elseif angle < 0 then 
		angle = 2*math.pi + angle;
	end

	local sin = math.sin(angle);
	local cos = math.cos(angle);
	--local py, px = DMA.HBD:GetRawPlayerWorldPosition();
	local px = DMAUserVars["LastGPS-X"];
	local py = DMAUserVars["LastGPS-Y"];
	px = px + distance * cos;
	py = py + distance * sin;

	DMAUserVars["LastGPS-X"] = px;
	DMAUserVars["LastGPS-Y"] = py;
	DMAUserVars["LastGPS-O"] = angle;

	DMA:UpdateEditBoxXYZ();

	local msg = ".go xyz "..DMAUserVars["LastGPS-X"].." "..DMAUserVars["LastGPS-Y"].." "..DMAUserVars["LastGPS-Z"];
	SendChatMessage(msg, "WHISPER", nil, GetUnitName("PLAYER"));
end